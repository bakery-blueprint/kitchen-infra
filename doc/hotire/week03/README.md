# 3주차

## System Call 시스템콜
 운영체제의 서비스를 받기 위해  운영체제에 정의된 함수(커널영역에 있는)를 호출하는 것을 말한다. 
 사용자가 운영체제의 서비스(특권 명령, 즉 커널 함수를 호출하기 위해)를 요청하기 위해 커널의 함수를 호출하는 것.


 -> 소프트웨어 인터럽트의 한 종류이다. 트랩이라근 용어로 부른다. 시스템콜과 예외 상황 2가지로 나뉜다.

일반적으로 함수 호출을 할 경우에는 스택의 복귀주소를 저장한 후 호출한 함수 위치로 점프하지만
시스템콜은 자신이 인터럽트 라인에 인터럽트를 세팅하는 명령을 통해 이루어진다. 

- 시스템콜 처리 과정

  1. 디스크 파일을 읽어와야 할 경우 시스템 콜을 한다. 

  2. 인터럽트 라인에 명령을 세팅한다. 

  3. cpu는 다음 명령을 수행하기전 인터럽트 라인을 체크한다. 

  4. 수행 중인 프로그램을 멈추고 , 상태를 저장하고 , 인터럽트를 발생시킨다. 모드비트 1로 변경

  5. 인터럽트 백터를 통해 인터럽트 처리 루틴을 찾아 이동한다. 

  6. 데이터를 읽어오는 일을 컨트롤러, 로컬버퍼에게 맡기고, cpu 제어권을 다른 프로세스에게 넘긴다. 

  7. 이때 프로세스는 봉쇄상태가 된다. 

  8. 작업이 완료되면 컨트롤러는 인터럽트 라인을 설정한다. 

  9. cpu는 명령어를 수행 하기전에 인터러트 라인을 체크하고 인터럽트가 발생한다. 하던 것을 멈추고 상태 저장

  10. 로컬버퍼에서 메모리로 얻어오고, 봉쇄당한 프로세스를 다시 준비 상태로 만들어 준비 큐에 넣는다.

  11. 다시 인터럽트 당했던 프로세스에게 넘어가 하던 작업을 수행한다.  

  12. 항상 명령어를 수행 하기전 모드비트를 검사한다. 